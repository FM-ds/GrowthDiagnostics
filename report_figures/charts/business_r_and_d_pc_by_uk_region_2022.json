{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 300,
    "height": 450,
    "data": {
      "url": "https://raw.githubusercontent.com/EconomicsObservatory/courses/main/datasets/advanced/nuts1.json",
      "format": {"type": "json", "property": "features"}
    },
    "transform": [
      {"calculate": "datum.properties.NAME_LATN", "as": "name"},
      {
        "lookup": "name",
        "from": {
          "data": {
            "values": [
              {"name": "EAST MIDLANDS (ENGLAND)", "value": 2357},
              {"name": "EAST OF ENGLAND", "value": 10690},
              {"name": "LONDON", "value": 8959},
              {"name": "NORTH EAST (ENGLAND)", "value": 732},
              {"name": "NORTH WEST (ENGLAND)", "value": 4831},
              {"name": "NORTHERN IRELAND", "value": 912},
              {"name": "SCOTLAND", "value": 2731},
              {"name": "SOUTH EAST (ENGLAND)", "value": 8705},
              {"name": "SOUTH WEST (ENGLAND)", "value": 3270},
              {"name": "WALES", "value": 959},
              {"name": "WEST MIDLANDS (ENGLAND)", "value": 3833},
              {"name": "YORKSHIRE AND THE HUMBER", "value": 1964}
            ]
          },
          "key": "name",
          "fields": ["value"]
        }
      }
    ],
    "encoding": {
      "color": {
        "field": "value",
        "type": "quantitative",
        "scale": {"scheme": "viridis"},
        "legend": {
          "title": null,
          "orient": "none",
          "labelExpr": "'Â£'+format(datum.value, ',.0f')+(datum.value == 800 ? ' a week' : '')",
          "legendX": -75,
          "legendY": 100
        }
      }
    },
    "projection": {"type": "naturalEarth1"},
    "mark": {"type": "geoshape", "stroke": "rgba(0,0,0,0.1)"}
  }